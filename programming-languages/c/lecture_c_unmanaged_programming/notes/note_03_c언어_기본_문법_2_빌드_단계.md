# C언어 기본 문법 2, 빌드 단계

이 문서는 Pope Kim [C 언매니지드 프로그래밍](https://www.udemy.com/course/c-unmanaged-programming-by-pocu/) 강의를 듣고 정리한 문서입니다.

## 함수

- C 언어 함수 맛보기

    ```c
    #include <stdio.h>

    static float s_gas = 500.f;

    void honk(void)
    {
        printf("Honk~ honk~);
    }

    void reduce_gas(float consumed_gas)
    {
        s_gas -= consumed_gas;
    }

    ```

- C는 접근 제어자(public, private 등)가 없다.
- C의 함수는 기본적으로 모두 전역(global) 함수이다.
- 함수 오버로딩도 존재하지 않는다. 따라서 필요할 경우 함수 이름을 다르게 만들어야 한다.
- C는 언제나 위에서 아래로 코드를 본다. ANSI C(C89)에서 함수 정의가 등장하기 전 그 함수를 호출하면 컴파일러가 다음과 같이 가정한다.
  - 반환형은 int
  - 매개 변수는 아무 것이나 올 수 있다.
  - 따라서 나중에 컴파일러가 int가 아닌 다른 것을 반환하는 함수를 찾으면 컴파일 오류를 발생시킨다.

## 함수 정의의 문제

- 위에서 본 문제를 해결하기 위해서 그러면...호출하는 코드 위에 전부 함수를 위치시켜야 할까? 다행히 그렇지는 않다. 아래에 나오는 함수 선언이 이런 문제를 해결해 준다.

## 함수 선언

- 함수의 구현체 없이 함수 원형(prototype)만 선언해 주는 것이다.
  - 원형이란?
    - 함수의 이름
    - 반환형
    - 매개 변수들의 자료형
      - 매개 변수 이름은 없어도 된다. 단, 가독성을 위해 일반적으로 변수 이름도 넣는 게 좋다.
  - 함수 정의(definition)은 실제로 함수를 구현해놓은 것이다.
    - 당연히, 함수 정의는 함수 선언이기도 하다.

```c

/* 함수 선언과 정의를 분리 */

#include <stdio.h>

void foo(void);

int main(void)
{
    foo();
    getchar();
    return 0;
}

void foo(void)
{
    printf("foo called");
}

/* 함수 선언과 정의가 하나 */

#include <stdio.h>

void foo(void)
{
    printf("foo called");
}

int main(void)
{
    foo();
    getchar();
    return 0;
}

```

- 함수를 선언한다는 것은 함수를 사용하기 전에 그 함수를 선언한다는 것이다. 보통은 파일의 제일 위에 선언한다.
  - forward declaration(전방 선언) 이라는 표현으로 많이 쓴다.
- 또는 헤더 파일에 넣을 수도 있고 이게 더 좋은 방법이다.
- 전방 선언의 작동 원리
  - 컴파일 시 실제 어디로 가서 코드를 찾아야 하는지는 모르니 구멍으로 둔다.
  - 컴파일 다음 단계인 링크(link) 단계에서 실제 코드 위치를 찾아서 그 구멍을 채운다.
- C89 표준에서 기본적으로 가정하는 사항을 충족하는 경우(int 를 반환하는 함수)에는 함수 선언을 하지 않아도 될까?
  - 그러지 말자. 함수 선언은 언제나 하도록 하자.
  - C99 표준부터는 int라는 가정을 하지 않는다.
  - 어떤 컴파일러는 경고만 주고, 컴파일은 허용할 수도 있다.
  - 모든 컴파일러가 그렇단 보장이 없다.

## 함수 매개변수 평가 순서, 피연산자 평가 순서

## 연산자 우선순위와 평가 순서 1

## 연산자 우선순위와 평가 순서 2

## 평가 순서를 강제하는 연산자

## 범위(scope)

## const 키워드

## goto 문

## goto 문은 정말로 악마인가요?

## 배열

## 스택 메모리

## 스택 메모리에 대해서 간단히 알아보자

## 스택 메모리 안의 배열, 스택 오버플로

## 배열의 요소 개수 구하는 방법

## 길이가 명시된 매개변수 배열

## 매개변수 배열의 길이, 배열 요소의 초기값

## 다차원 배열

## 소스코드에서 실행파일까지, C 프로그램의 빌드 과정

## .h와 .c 파일

## 헤더 파일이 필요한 이유

## #include <>와 #include ""

## 빌드 과정: 전처리 단계

## 트랜슬레이션 유닛 보는 방법

## 빌드 과정: 컴파일 단계

## 어셈블리어 코드 보는 방법

## 빌드 과정: 어셈블 단계

## 오브젝트 코드 보는 방법

## 빌드 과정: 링크 단계

## 링크 단계가 분리되어 있는 이유

## 라이브러리(library), 정적/동적 라이브러리와 링크

## 분할 컴파일과 전역 변수

## 다른 파일에 있는 전역 변수 사용 시 문제점

## extern 키워드

## 전역 변수의 문제, static 키워드

## .c와 .h 파일 정리, 순환 헤더 인클루드와 해결법

## 인클루드 가드 작동법

## 인클루드 가드 예제

## C 컴파일러의 종류와 특징

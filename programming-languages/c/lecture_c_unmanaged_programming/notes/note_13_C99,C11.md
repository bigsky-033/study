# C99, C11

이 문서는 Pope Kim [C 언매니지드 프로그래밍](https://www.udemy.com/course/c-unmanaged-programming-by-pocu/) 강의를 듣고 정리한 문서입니다.

## 부동소수점 예외

- C99 이전의 부동 소수점 연산 오류 처리
  - C 라이브러리 함수가 오류 조건을 보고하는 경우가 있다. 이 오류 조건의 일부는 errno을 통해 확인이 가능하다.
    - 인자가 수학적으로 정의된 범위를 벗어날 경우: EDOM
    - 오버플로가 발생한 경우: ERANGE
    - 언더플로가 발생한 경우: ERANGE가 설정될 수도 있다.
- C99의 부동 소수점 연산 처리
  - 좀 더 세분화된 부동 소수점 전용 오류 보고 기능이 추가되었다. errno에서 찾을 수 없던 오류 조건도 보고가 된다.
  - 부동 소수점 연산 오류 처리방법 확인하기
  - math_errhandling 비트 플래그 확인
    - 여전히 errno을 사용: MATH_ERRNO 플래그가 설정되어 있다.
      - `#define MATH_ERRNO     1`
    - 부동 소수점 예외를 사용: MATH_ERREXCEPT 플래그
      - `#define MATH_ERREXCEPT     2`
    - 둘 다 지원: 둘 다 설정되어 있다.
    - 다음이 참이면 IEEE 부동 소수점 연산(IEC 60559)을 지원하는 구현이다.
      - `math_errhandling & MATH_ERREXCEPT`
  - 부동 소수점 예외
    - `<fenv.h>` 헤더에 예외들이 정의되어 있다.
    - 부동 소수점 예외가 났는지 확인을 하기 위한 함수 들이 존재한다.
      - `int fetestexcept(int excepts);`: excepts로 지정된 비트 플래그들이 설정되었는지 확인한다.
      - `int feclearexcept(int excepts)`: excepts로 지정한 비트 플래그들의 상태를 지운다.
    - 부동 소수점 예외를 설정해줄 수도 있다.
      - `int feraiseexcept(int excepts);`
  - 부동 소수점 연산 환경도 설정 가능하다.
  - 지원 여부는 불확실하다.
    - `#pragma STDC FENV_ACCESS ON`: 을 설정해야 제대로 작성한다(표준 기준).

## Type-Generic 수학

- 제네릭(generic)이란 보통 둘 중 하나를 의미한다.
  - 모든 자료형을 표현할 수 있는 경우. 예를 들어 `void*` 같은 경우를 말한다.
  - 각 자료형에 맞게 알아서 동작하는 경우를 말한다.
- 여기서는 두 번째 의미를 말한다.
- 수학 함수(math.h) 및 복소수(complext.h) 같은 곳에서 함수의 이름은 똑같이 넣되 타입에 따라 올바른 함수가 호출되게 하는 걸 말한다. 매크로 함수(`<tgmath.h>`) 마법이다.

## 가변 길이 배열

- 동적 할당을 하지 않고 길이가 가변인 배열이다.
- VLA(Variable Length Arrays) 라고 부른다.
- 그런데...메모리 관리 측면이 문제이다. C 답지 못하다.
- 있는 것만 알아두자. C11에서는 선택 사항으로 강등되었다.

## 가변 길이 배열의 메모리 위치

- 보통은 스택에 저장된다.
- 실행 중에 내부적으로 뭔가 더 복잡한 일이 일어난다.
  - 실행 중에 배열을 메모리 어딘가에 저장한 뒤 그 포인터를 기억한다. 나중에 배열을 사용할 때마다 그 포인터를 통해 접근한다.
- 스택 오버플로가 눈에 잘 안 띄게 만든다.
- 그냥...안 쓰는 게 낫다.

## 배열 색인 안의 static 키워드

## 복합 리터럴

## 가변 인자 매크로

## 유니버셜 문자 이름

## 멀티바이트 문자

## 다국어 지원의 역사 1탄

## 다국어 지원의 역사 2탄: wchar_t

## C11

## 유니코드 지원

## 다국어 지원의 역사 3탄: UTF-16/32

## 다국어 지원 접근 방법

## 새로운 안전한(?) 함수

## gets_s()

## sprintf_s(), snprintf_s()

## fopen_s()

## strnlen_s()

## strcpy_s()

## strncpy_s()

## _s 함수를 과연 써야 할까?
